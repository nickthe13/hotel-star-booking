@if (loading) {
  <div class="loading">
    <p>Loading reviews...</p>
  </div>
} @else if (reviews.length === 0) {
  <div class="empty-state">
    <p>No reviews yet. Be the first to review!</p>
  </div>
} @else {
  <div class="reviews-list">
    @for (review of reviews; track review.id) {
      <div class="review-card">
        <div class="review-card__header">
          <div class="review-card__user">
            <div class="user-avatar">
              {{ (review.userName?.charAt(0) || 'U').toUpperCase() }}
            </div>
            <div class="user-info">
              <h4 class="user-name">{{ review.userName || 'Anonymous' }}</h4>
              <p class="review-date">{{ formatDate(review.createdAt) }}</p>
            </div>
          </div>
          <div class="review-card__rating">
            <div class="stars">
              @for (star of getStarArray(review.rating); track star) {
                <span [class.filled]="isStarFilled(star, review.rating)">‚≠ê</span>
              }
            </div>
            <span class="rating-value">{{ review.rating }}/5</span>
          </div>
        </div>

        @if (review.comment) {
          <div class="review-card__content">
            <p class="review-comment">{{ review.comment }}</p>
          </div>
        }

        @if (canModifyReview(review)) {
          <div class="review-card__actions">
            <button
              class="btn btn--sm btn--secondary"
              (click)="editReview(review)"
              type="button"
            >
              ‚úèÔ∏è Edit
            </button>
            <button
              class="btn btn--sm btn--danger"
              (click)="openDeleteDialog(review.id)"
              type="button"
            >
              üóëÔ∏è Delete
            </button>
          </div>
        }
      </div>
    }
  </div>
}

<!-- Delete Confirmation Dialog -->
<app-confirmation-dialog
  [title]="'Delete Review'"
  [message]="'Are you sure you want to delete this review? This action cannot be undone.'"
  [isOpen]="showDeleteDialog()"
  [confirmText]="'Delete'"
  [cancelText]="'Cancel'"
  [variant]="'danger'"
  (onConfirm)="confirmDelete()"
  (onCancel)="closeDeleteDialog()"
></app-confirmation-dialog>
