<article class="hotel-card">
  <a [routerLink]="['/hotels', hotel.id]" class="hotel-card__link">
    <div class="hotel-card__image-wrapper">
      <img
        [src]="hotel.images[0]"
        [alt]="hotel.name"
        class="hotel-card__image"
        loading="lazy"
      />
      @if (hotel.featured) {
        <span class="hotel-card__badge">Featured</span>
      }
      <button
        type="button"
        class="hotel-card__favorite"
        [class.hotel-card__favorite--active]="isFavorite"
        (click)="toggleFavorite($event)"
        [attr.aria-label]="isFavorite ? 'Remove from favorites' : 'Add to favorites'"
        [title]="isFavorite ? 'Remove from favorites' : 'Add to favorites'"
      >
        <svg
          class="heart-icon"
          [class.heart-icon--filled]="isFavorite"
          viewBox="0 0 24 24"
          width="24"
          height="24"
        >
          @if (isFavorite) {
            <path
              fill="currentColor"
              d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"
            />
          } @else {
            <path
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"
            />
          }
        </svg>
      </button>
    </div>

    <div class="hotel-card__content">
      <div class="hotel-card__header">
        <h3 class="hotel-card__title">{{ hotel.name }}</h3>
        <div class="hotel-card__rating">
          <span class="hotel-card__stars">
            @for (star of [1, 2, 3, 4, 5]; track star) {
              <span
                class="star"
                [class.star--filled]="star <= hotel.starRating"
                >&#9733;</span
              >
            }
          </span>
        </div>
      </div>

      <p class="hotel-card__location">{{ hotel.location }}</p>

      <p class="hotel-card__description">{{ hotel.description }}</p>

      <div class="hotel-card__amenities">
        @for (amenity of hotel.amenities.slice(0, 4); track amenity) {
          <span class="amenity-tag">{{ amenity }}</span>
        }
        @if (hotel.amenities.length > 4) {
          <span class="amenity-tag">+{{ hotel.amenities.length - 4 }} more</span>
        }
      </div>

      <div class="hotel-card__footer">
        <div class="hotel-card__reviews">
          @if (hotel.averageRating) {
            <span class="rating-score">{{ hotel.averageRating | number:'1.1-1' }}</span>
            <span class="rating-text"
              >Excellent ({{ hotel.totalReviews }} reviews)</span
            >
          }
        </div>
        <div class="hotel-card__price">
          <span class="price-label">From</span>
          <span class="price-amount">${{ hotel.pricePerNight }}</span>
          <span class="price-period">/night</span>
        </div>
      </div>
    </div>
  </a>
</article>
