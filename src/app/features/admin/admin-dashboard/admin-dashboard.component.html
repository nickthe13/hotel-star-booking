@if (loading()) {
  <div class="dashboard-loading">
    <div class="spinner"></div>
    <p>Loading dashboard...</p>
  </div>
} @else {
  <div class="dashboard">
    <div class="dashboard__header">
      <h2 class="dashboard__title">Dashboard Overview</h2>
      <p class="dashboard__subtitle">Monitor your hotel booking statistics</p>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
      <a routerLink="/admin/hotels" class="quick-action-btn">
        <span class="quick-action-btn__icon">üè®</span>
        <span class="quick-action-btn__text">Manage Hotels</span>
      </a>
      <a routerLink="/admin/rooms" class="quick-action-btn">
        <span class="quick-action-btn__icon">üö™</span>
        <span class="quick-action-btn__text">Manage Rooms</span>
      </a>
      <a routerLink="/admin/bookings" class="quick-action-btn">
        <span class="quick-action-btn__icon">üìÖ</span>
        <span class="quick-action-btn__text">Manage Bookings</span>
      </a>
    </div>

    <!-- Statistics Cards -->
    <div class="stats-grid">
      <div class="stat-card stat-card--primary">
        <div class="stat-card__icon">üìä</div>
        <div class="stat-card__content">
          <div class="stat-card__value">{{ statistics().totalBookings }}</div>
          <div class="stat-card__label">Total Bookings</div>
        </div>
      </div>

      <div class="stat-card stat-card--success">
        <div class="stat-card__icon">üí∞</div>
        <div class="stat-card__content">
          <div class="stat-card__value">{{ formatCurrency(statistics().totalRevenue) }}</div>
          <div class="stat-card__label">Total Revenue</div>
        </div>
      </div>

      <div class="stat-card stat-card--info">
        <div class="stat-card__icon">üè®</div>
        <div class="stat-card__content">
          <div class="stat-card__value">{{ statistics().totalHotels }}</div>
          <div class="stat-card__label">Total Hotels</div>
        </div>
      </div>

      <div class="stat-card stat-card--warning">
        <div class="stat-card__icon">‚è∞</div>
        <div class="stat-card__content">
          <div class="stat-card__value">{{ statistics().activeBookings }}</div>
          <div class="stat-card__label">Active Bookings</div>
        </div>
      </div>

      <div class="stat-card stat-card--accent">
        <div class="stat-card__icon">üíµ</div>
        <div class="stat-card__content">
          <div class="stat-card__value">{{ formatCurrency(statistics().averageBookingValue) }}</div>
          <div class="stat-card__label">Average Booking Value</div>
        </div>
      </div>

      <div class="stat-card stat-card--completed">
        <div class="stat-card__icon">‚úÖ</div>
        <div class="stat-card__content">
          <div class="stat-card__value">{{ statistics().completedBookings }}</div>
          <div class="stat-card__label">Completed Bookings</div>
        </div>
      </div>
    </div>

    <!-- Booking Status Breakdown -->
    <div class="section">
      <h3 class="section__title">Booking Status Breakdown</h3>
      <div class="status-grid">
        <div class="status-item">
          <div class="status-item__header">
            <span class="status-item__label">Pending</span>
            <span class="status-item__value status-item__value--warning">
              {{ pendingBookings() }}
            </span>
          </div>
          @if (statistics().totalBookings > 0) {
            <div class="progress-bar">
              <div
                class="progress-bar__fill progress-bar__fill--warning"
                [style.width.%]="(pendingBookings() / statistics().totalBookings) * 100"
              ></div>
            </div>
          }
        </div>
        <div class="status-item">
          <div class="status-item__header">
            <span class="status-item__label">Confirmed</span>
            <span class="status-item__value status-item__value--success">
              {{ confirmedBookings() }}
            </span>
          </div>
          @if (statistics().totalBookings > 0) {
            <div class="progress-bar">
              <div
                class="progress-bar__fill progress-bar__fill--success"
                [style.width.%]="(confirmedBookings() / statistics().totalBookings) * 100"
              ></div>
            </div>
          }
        </div>
        <div class="status-item">
          <div class="status-item__header">
            <span class="status-item__label">Completed</span>
            <span class="status-item__value status-item__value--info">
              {{ statistics().completedBookings }}
            </span>
          </div>
          @if (statistics().totalBookings > 0) {
            <div class="progress-bar">
              <div
                class="progress-bar__fill progress-bar__fill--info"
                [style.width.%]="(statistics().completedBookings / statistics().totalBookings) * 100"
              ></div>
            </div>
          }
        </div>
        <div class="status-item">
          <div class="status-item__header">
            <span class="status-item__label">Cancelled</span>
            <span class="status-item__value status-item__value--danger">
              {{ statistics().cancelledBookings }}
            </span>
          </div>
          @if (statistics().totalBookings > 0) {
            <div class="progress-bar">
              <div
                class="progress-bar__fill progress-bar__fill--danger"
                [style.width.%]="(statistics().cancelledBookings / statistics().totalBookings) * 100"
              ></div>
            </div>
          }
        </div>
      </div>
    </div>

    <div class="dashboard__grid">
      <!-- Recent Bookings -->
      <div class="section">
        <h3 class="section__title">Recent Bookings</h3>
        @if (statistics().recentBookings.length > 0) {
          <div class="bookings-list">
            @for (booking of statistics().recentBookings; track booking.id) {
              <div class="booking-card">
                <img
                  [src]="booking.hotel.image"
                  [alt]="booking.hotel.name"
                  class="booking-card__image"
                >
                <div class="booking-card__content">
                  <h4 class="booking-card__hotel">{{ booking.hotel.name }}</h4>
                  <p class="booking-card__location">{{ booking.hotel.location }}</p>
                  <div class="booking-card__details">
                    <span class="booking-card__dates">
                      {{ formatDate(booking.checkIn) }} - {{ formatDate(booking.checkOut) }}
                    </span>
                    <span class="booking-card__price">{{ formatCurrency(booking.totalPrice) }}</span>
                  </div>
                </div>
                <span class="badge" [class]="getStatusBadgeClass(booking.status)">
                  {{ booking.status }}
                </span>
              </div>
            }
          </div>
        } @else {
          <div class="empty-state">
            <p>No bookings found</p>
          </div>
        }
      </div>

      <!-- Popular Hotels -->
      <div class="section">
        <h3 class="section__title">Popular Hotels</h3>
        @if (statistics().popularHotels.length > 0) {
          <div class="hotels-list">
            @for (hotel of statistics().popularHotels; track hotel.hotelId) {
              <div class="hotel-card">
                <div class="hotel-card__content">
                  <h4 class="hotel-card__name">{{ hotel.hotelName }}</h4>
                  <div class="hotel-card__stats">
                    <span class="hotel-card__bookings">
                      üìÖ {{ hotel.bookingCount }} {{ hotel.bookingCount === 1 ? 'booking' : 'bookings' }}
                    </span>
                    <span class="hotel-card__revenue">
                      üí∞ {{ formatCurrency(hotel.revenue) }} revenue
                    </span>
                  </div>
                </div>
              </div>
            }
          </div>
        } @else {
          <div class="empty-state">
            <p>No hotel data available</p>
          </div>
        }
      </div>
    </div>
  </div>
}
